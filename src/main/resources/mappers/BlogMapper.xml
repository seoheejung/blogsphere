<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.blogsphere.repository.mybatis.BlogMapper">
    <!-- 총 게시물 수, 총 댓글 수 등 블로그 통계 조회 -->
    <select id="getBlogStatistics" resultType="map">
        SELECT 
            COUNT(*) AS postCount, 
            SUM(commentCount) AS totalComments 
        FROM posts 
        WHERE blogId = #{blogId}
    </select>

    <!-- 특정 단어를 포함한 블로그 게시물 조회 -->
    <select id="searchPostsByKeyword" resultType="Post">
        SELECT * 
        FROM posts 
        WHERE blogId = #{blogId} AND content LIKE CONCAT('%', #{keyword}, '%')
    </select>

    <!-- 특정 카테고리 또는 태그를 가진 게시물 검색 -->
    <select id="findPostsByCategoryOrTag" resultType="Post">
        SELECT * 
        FROM posts 
        WHERE blogId = #{blogId} 
            AND (categoryId = #{categoryId} OR tag LIKE CONCAT('%', #{tag}, '%'))
    </select>
</mapper>
